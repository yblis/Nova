{% extends 'base.html' %}

{% block title %}{{ page_title | default('Settings') }} â€¢ Ollama Manager{% endblock %}

{% block styles %}
{{ super() }}
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
{% endblock %}

{% block content %}
<div style="width: 100%; max-width: 100%; overflow-x: hidden; min-height: 100%; display: flex; flex-direction: column; box-sizing: border-box;"
    x-data="settingsPage" x-init="{% block settings_init %}{% endblock %}">

    <!-- Header -->
    <div class="px-4 sm:px-8 py-4 sm:py-6 border-b border-zinc-200 dark:border-zinc-800 flex-shrink-0">
        <h1 class="text-2xl sm:text-3xl font-bold text-zinc-900 dark:text-zinc-100">Settings</h1>
    </div>

    <!-- Mobile Tabs (scrollable) -->
    <div
        class="md:hidden overflow-x-auto border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 flex-shrink-0">
        <div class="flex px-4 py-2 gap-1">
            <a href="{{ url_for('core.settings_page', page='general') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400' if current_page == 'general' else 'text-zinc-600 dark:text-zinc-400' }}">
                General
            </a>
            <a href="{{ url_for('core.settings_page', page='providers') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400' if current_page == 'providers' else 'text-zinc-600 dark:text-zinc-400' }}">
                Fournisseurs
            </a>
            <a href="{{ url_for('core.settings_page', page='shortcuts') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400' if current_page == 'shortcuts' else 'text-zinc-600 dark:text-zinc-400' }}">
                Shortcuts
            </a>
            <a href="{{ url_for('core.settings_page', page='rag') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400' if current_page == 'rag' else 'text-zinc-600 dark:text-zinc-400' }}">
                RAG
            </a>
            <a href="{{ url_for('core.settings_page', page='llm') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400' if current_page == 'llm' else 'text-zinc-600 dark:text-zinc-400' }}">
                LLM
            </a>
            <a href="{{ url_for('core.settings_page', page='about') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400' if current_page == 'about' else 'text-zinc-600 dark:text-zinc-400' }}">
                About
            </a>
            <a href="{{ url_for('core.settings_page', page='websearch') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400' if current_page == 'websearch' else 'text-zinc-600 dark:text-zinc-400' }}">
                Web
            </a>
            <a href="{{ url_for('core.settings_page', page='prompts') }}"
                class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors {{ 'bg-pink-100 text-pink-600 dark:bg-pink-900/30 dark:text-pink-400' if current_page == 'prompts' else 'text-zinc-600 dark:text-zinc-400' }}">
                Prompts
            </a>
        </div>
    </div>

    <div class="flex-1 flex overflow-hidden min-h-0">

        <!-- Desktop Settings Sidebar (hidden on mobile) -->
        <aside
            class="hidden md:block w-64 flex-shrink-0 overflow-y-auto border-r border-zinc-200 dark:border-zinc-800 py-6 px-4 space-y-1">
            <a href="{{ url_for('core.settings_page', page='general') }}"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {{ 'bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400' if current_page == 'general' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span x-text="t('settings.general', 'General')"></span>
            </a>

            <a href="{{ url_for('core.settings_page', page='providers') }}"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {{ 'bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400' if current_page == 'providers' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
                </svg>
                <span x-text="t('settings.providers', 'LLM Providers')"></span>
            </a>

            <a href="{{ url_for('core.settings_page', page='shortcuts') }}"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {{ 'bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400' if current_page == 'shortcuts' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <span x-text="t('settings.shortcuts', 'Shortcuts')"></span>
            </a>

            <a href="{{ url_for('core.settings_page', page='rag') }}"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {{ 'bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400' if current_page == 'rag' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                </svg>
                <span x-text="t('settings.rag', 'RAG / Documents')"></span>
            </a>

            <a href="{{ url_for('core.settings_page', page='about') }}"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {{ 'bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400' if current_page == 'about' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span x-text="t('settings.about', 'About')"></span>
            </a>

            <a href="{{ url_for('core.settings_page', page='llm') }}"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {{ 'bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400' if current_page == 'llm' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                </svg>
                <span x-text="t('settings.llmTab', 'LLM')"></span>
            </a>

            <div class="pt-4 mt-2 border-t border-zinc-100 dark:border-zinc-800/50">
                <a href="{{ url_for('core.settings_page', page='websearch') }}"
                    class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors mt-1 {{ 'bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400' if current_page == 'websearch' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                    </svg>
                    <span x-text="t('settings.websearch', 'Web Search')"></span>
                </a>

                <a href="{{ url_for('core.settings_page', page='prompts') }}"
                    class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors mt-1 {{ 'bg-pink-50 text-pink-600 dark:bg-pink-900/20 dark:text-pink-400' if current_page == 'prompts' else 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50' }}">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                    </svg>
                    <span x-text="t('settings.textprompts', 'Text Prompts')"></span>
                </a>
            </div>
        </aside>

        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8 w-full">
            <div class="max-w-4xl mx-auto">
                {% block settings_content %}{% endblock %}
            </div>
        </div>
    </div>
</div>
{% endblock %}